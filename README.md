# SagaQuests - é«˜åº¦æ¨¡å—åŒ–ä»»åŠ¡ç³»ç»Ÿ

> ğŸš€ åŸºäº Bukkit API 1.20.1 å¼€å‘çš„é«˜åº¦æ¨¡å—åŒ– Minecraft ä»»åŠ¡ç³»ç»Ÿæ’ä»¶

**é€‚ç”¨åœºæ™¯**ï¼šå•æœåŠ¡å™¨ç¯å¢ƒã€BungeeCord è·¨æœç½‘ç»œã€å¤§å‹ RPG æœåŠ¡å™¨ã€ç«æŠ€æœåŠ¡å™¨ã€ç”Ÿå­˜æœåŠ¡å™¨

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ ä»»åŠ¡ç³»ç»Ÿ
- **ä»»åŠ¡ç±»å‹**ï¼šå‡»æ€ã€æ”¶é›†ã€äº¤äº’ã€ç ´åã€æ”¾ç½®ã€åˆ¶ä½œã€é’“é±¼ã€å†œä¸š
- **æ¡ä»¶ç³»ç»Ÿ**ï¼š23ç§æ¡ä»¶ç±»å‹ï¼Œæ”¯æŒå¤æ‚ç»„åˆé€»è¾‘
- **å¥–åŠ±æœºåˆ¶**ï¼šç‰©å“ã€ç»éªŒã€å‘½ä»¤ã€ç»æµã€ç‚¹æ•°ã€å¤åˆå¥–åŠ±
- **å‰ç½®ä»»åŠ¡**ï¼šæ”¯æŒå¤æ‚çš„ä»»åŠ¡ä¾èµ–å…³ç³»å’Œé€»è¾‘æ¡ä»¶
- **ä»»åŠ¡åˆ†ç±»**ï¼šä¸»çº¿ã€æ”¯çº¿ã€æ—¥å¸¸ã€ç‰¹æ®Šä»»åŠ¡å®Œæ•´åˆ†ç±»

### ğŸ–¥ï¸ GUIç³»ç»Ÿ
- **æ™ºèƒ½åˆ†é¡µ**ï¼šæ”¯æŒå¤§é‡ä»»åŠ¡çš„åˆ†é¡µæ˜¾ç¤º
- **å®æ—¶è¿›åº¦**ï¼šä»»åŠ¡è¿›åº¦æ¡ã€çŠ¶æ€æ˜¾ç¤ºã€äº¤äº’æç¤º
- **å¤šè§†å›¾æ¨¡å¼**ï¼šä»»åŠ¡åˆ—è¡¨ã€è¿›è¡Œä¸­ã€å·²å®Œæˆç­‰è§†å›¾

### ğŸ® æ¸¸æˆå†…ç¼–è¾‘å™¨
- **å¯è§†åŒ–ç¼–è¾‘**ï¼šæ¸¸æˆå†…åˆ›å»ºã€ä¿®æ”¹ã€éªŒè¯ä»»åŠ¡
- **å®æ—¶é¢„è§ˆ**ï¼šæ‰€è§å³æ‰€å¾—çš„ä»»åŠ¡é…ç½®ä½“éªŒ
- **ä¸€é”®å…‹éš†**ï¼šå¿«é€Ÿå¤åˆ¶å’Œä¿®æ”¹ç°æœ‰ä»»åŠ¡

### ğŸ’¾ åŒæ¨¡å¼æ•°æ®å­˜å‚¨
- **SQLiteå•æœºæ¨¡å¼**ï¼šé€‚åˆå•æœåŠ¡å™¨ï¼Œé›¶é…ç½®å¼€ç®±å³ç”¨
- **Redis+MySQLåˆ†å¸ƒå¼æ¨¡å¼**ï¼šæ”¯æŒ BungeeCord è·¨æœåŒæ­¥
- **3å±‚ç¼“å­˜æ¶æ„**ï¼šL1æœ¬åœ° â†’ L2Redis â†’ L3MySQL æè‡´æ€§èƒ½ä¼˜åŒ–
- **æ— ç¼æ•°æ®è¿ç§»**ï¼šSQLite â‡„ MySQL åŒå‘è¿ç§»å·¥å…·

### ğŸ”— æ·±åº¦é›†æˆæ”¯æŒ
- **Vaultç»æµç³»ç»Ÿ**ï¼šç»æµæ¡ä»¶ã€ç»æµå¥–åŠ±å®Œæ•´æ”¯æŒ
- **PlayerPointsç‚¹æ•°**ï¼šç‚¹æ•°æ¡ä»¶ã€ç‚¹æ•°å¥–åŠ±é›†æˆ
- **PlaceholderAPI**ï¼šä¸°å¯Œçš„å ä½ç¬¦æ”¯æŒï¼Œå®Œç¾èå…¥å…¶ä»–æ’ä»¶
- **è½¯ä¾èµ–è®¾è®¡**ï¼šæ‰€æœ‰é›†æˆå‡ä¸ºå¯é€‰ï¼Œä¿è¯å…¼å®¹æ€§



## ğŸš€ å¿«é€Ÿå…¥é—¨

### ğŸ® ç©å®¶å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½æè¿° | æƒé™è¦æ±‚ |
|------|----------|----------|
| `/quest gui` | æ‰“å¼€ç°ä»£åŒ–ä»»åŠ¡GUIç•Œé¢ | `sagaquests.use` |
| `/quest list` | æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ä»»åŠ¡åˆ—è¡¨ | `sagaquests.use` |
| `/quest start <ä»»åŠ¡ID>` | å¼€å§‹æŒ‡å®šä»»åŠ¡ | `sagaquests.use` |
| `/quest abandon <ä»»åŠ¡ID>` | æ”¾å¼ƒæ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡ | `sagaquests.use` |
| `/quest progress` | æŸ¥çœ‹å½“å‰ä»»åŠ¡è¿›åº¦ | `sagaquests.use` |

### ğŸ› ï¸ ç®¡ç†å‘˜å‘½ä»¤

#### åŸºç¡€ç®¡ç†
| å‘½ä»¤ | åŠŸèƒ½æè¿° |
|------|----------|
| `/quest reload` | é‡æ–°åŠ è½½æ‰€æœ‰é…ç½®æ–‡ä»¶ |
| `/quest cancel` | å–æ¶ˆå½“å‰çš„è®¾ç½®ä¼šè¯ |

#### äº¤äº’ç®¡ç†
| å‘½ä»¤ | åŠŸèƒ½æè¿° |
|------|----------|
| `/quest interact set <ä»»åŠ¡ID>` | è®¾ç½®å®ä½“/æ–¹å—äº¤äº’ç›®æ ‡ |
| `/quest interact remove` | ç§»é™¤äº¤äº’è®¾ç½® |
| `/quest interact list` | æŸ¥çœ‹äº¤äº’ç»Ÿè®¡ä¿¡æ¯ |

#### ä»»åŠ¡ç¼–è¾‘å™¨
| å‘½ä»¤ | åŠŸèƒ½æè¿° |
|------|----------|
| `/quest editor create <ä»»åŠ¡ID>` | åˆ›å»ºæ–°ä»»åŠ¡ |
| `/quest editor modify <ä»»åŠ¡ID> <è·¯å¾„> <å€¼>` | ä¿®æ”¹ä»»åŠ¡å±æ€§ |
| `/quest editor validate <ä»»åŠ¡ID>` | éªŒè¯ä»»åŠ¡é…ç½® |
| `/quest editor clone <æºID> <æ–°ID>` | å…‹éš†ä»»åŠ¡ |
| `/quest editor delete <ä»»åŠ¡ID>` | åˆ é™¤ä»»åŠ¡ |

#### ä»»åŠ¡å¿«é€Ÿç¼–è¾‘
ğŸ“Œ **ç‰©å“ç¼–è¾‘**
```bash
# å¥–åŠ±ç‰©å“ç®¡ç†
/quest editquest <ä»»åŠ¡ID> rewards additems <ç‰©å“ID>    # æ·»åŠ æ‰‹ä¸­ç‰©å“ä¸ºå¥–åŠ±
/quest editquest <ä»»åŠ¡ID> rewards removeitems <ç‰©å“ID>  # ç§»é™¤å¥–åŠ±ç‰©å“
/quest editquest <ä»»åŠ¡ID> rewards listitems            # åˆ—å‡ºæ‰€æœ‰å¥–åŠ±ç‰©å“

# æ¡ä»¶ç‰©å“ç®¡ç†
/quest editquest <ä»»åŠ¡ID> conditions additems <ç‰©å“ID>   # æ·»åŠ æ‰‹ä¸­ç‰©å“ä¸ºæ¡ä»¶
/quest editquest <ä»»åŠ¡ID> conditions removeitems <ç‰©å“ID> # ç§»é™¤æ¡ä»¶ç‰©å“
/quest editquest <ä»»åŠ¡ID> conditions listitems           # åˆ—å‡ºæ‰€æœ‰æ¡ä»¶ç‰©å“
```

ğŸ“Œ **äº¤äº’ç›®æ ‡ç¼–è¾‘**
```bash
# å®ä½“äº¤äº’ç®¡ç†
/quest editquest <ä»»åŠ¡ID> interact addentity <åç§°>     # æ·»åŠ å®ä½“äº¤äº’ç›®æ ‡
/quest editquest <ä»»åŠ¡ID> interact removeentity <åç§°>  # ç§»é™¤å®ä½“äº¤äº’ç›®æ ‡
/quest editquest <ä»»åŠ¡ID> interact listentities         # åˆ—å‡ºæ‰€æœ‰å®ä½“äº¤äº’ç›®æ ‡

# æ–¹å—äº¤äº’ç®¡ç†
/quest editquest <ä»»åŠ¡ID> interact addblock <åç§°>       # æ·»åŠ æ–¹å—äº¤äº’ç›®æ ‡
/quest editquest <ä»»åŠ¡ID> interact removeblock <åç§°>    # ç§»é™¤æ–¹å—äº¤äº’ç›®æ ‡
/quest editquest <ä»»åŠ¡ID> interact listblocks           # åˆ—å‡ºæ‰€æœ‰æ–¹å—äº¤äº’ç›®æ ‡
```

#### æ•°æ®è¿ç§»å·¥å…·
| å‘½ä»¤ | åŠŸèƒ½æè¿° |
|------|----------|
| `/quest migrate export-yaml` | å¯¼å‡ºæ•°æ®åˆ°YAMLæ–‡ä»¶ |
| `/quest migrate import-yaml` | ä» YAMLæ–‡ä»¶å¯¼å…¥æ•°æ® |
| `/quest migrate sqlite-to-mysql <ä¸»æœº> <ç«¯å£> <æ•°æ®åº“> <ç”¨æˆ·> <å¯†ç >` | SQLiteè¿ç§»åˆ°MySQL |
| `/quest migrate mysql-to-sqlite <ä¸»æœº> <ç«¯å£> <æ•°æ®åº“> <ç”¨æˆ·> <å¯†ç >` | MySQLè¿ç§»åˆ°SQLite |


## ğŸ“‚ é…ç½®æ–‡ä»¶è¯¦è§£

### ğŸŒ config.yml - ä¸»é…ç½®

ä¸»é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰æ ¸å¿ƒè®¾ç½®ï¼š

#### ğŸ”§ åŸºç¡€è®¾ç½®
```yaml
settings:
  language: zh_CN                    # è¯­è¨€è®¾ç½®
  auto-save-interval: 300            # è‡ªåŠ¨ä¿å­˜é—´éš”(ç§’)
  max-active-quests: 5               # ç©å®¶æœ€å¤§æ´»åŠ¨ä»»åŠ¡æ•°
  abandon-cooldown: 3600             # æ”¾å¼ƒä»»åŠ¡å†·å´æ—¶é—´(ç§’)
  track-quest-limit: 3               # ä»»åŠ¡è¿½è¸ªæ˜¾ç¤ºé™åˆ¶
  auto-start-on-interact: false      # ä¸å®ä½“/æ–¹å—äº¤äº’æ—¶æ˜¯å¦è‡ªåŠ¨å¼€å§‹ä»»åŠ¡
```

#### ğŸ’¾ æ•°æ®å­˜å‚¨é…ç½®
```yaml
storage:
  type: sqlite                       # å­˜å‚¨ç±»å‹: sqlite æˆ– redis
  
  # SQLite é…ç½®
  sqlite:
    file: database.db
  
  # Redis é…ç½®
  redis:
    host: localhost
    port: 6379
    password: ""
    database: 0
    max_connections: 20
    connection_timeout: 2000
  
  # MySQL é…ç½®  
  mysql:
    host: localhost
    port: 3306
    database: sagaquests
    username: root
    password: ""
    max_pool_size: 20
    connection_timeout: 30000
  
  # ç¼“å­˜é…ç½®
  cache:
    local_ttl: 5                     # L1æœ¬åœ°ç¼“å­˜TTL(ç§’)
    redis_ttl: 300                   # L2Redisç¼“å­˜TTL(ç§’)
    max_local_size: 1000             # æœ¬åœ°ç¼“å­˜æœ€å¤§å¤§å°
```

### ğŸ’¬ message.yml - æ¶ˆæ¯é…ç½®

æ¶ˆæ¯é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒå®Œå…¨è‡ªå®šä¹‰æ‰€æœ‰æ¶ˆæ¯æ–‡æœ¬ï¼Œæ”¯æŒå¤šè¯­è¨€ã€‚

### ğŸ“¦ placeholder.yml - å ä½ç¬¦é…ç½®

å®šä¹‰ä¸°å¯Œçš„å ä½ç¬¦æ”¯æŒï¼Œé›†æˆ PlaceholderAPIã€‚

### ğŸ“ quests/ - ä»»åŠ¡é…ç½®ç›®å½•

ä»»åŠ¡é…ç½®æ–‡ä»¶ç›®å½•ï¼Œæ”¯æŒå¤šä¸ª YAML æ–‡ä»¶å®šä¹‰ä»»åŠ¡ï¼Œçµæ´»ç»„ç»‡ä»»åŠ¡ç»“æ„ã€‚


## ğŸ”§ ç»Ÿä¸€æ¡ä»¶ç³»ç»Ÿè¯¦è§£

SagaQuests é‡‡ç”¨æ¨¡å—åŒ–çš„ç»Ÿä¸€æ¡ä»¶ç³»ç»Ÿï¼Œæ”¯æŒçµæ´»çš„æ¡ä»¶ç»„åˆå’Œå¤æ‚çš„é€»è¾‘åˆ¤æ–­ã€‚

### ğŸ“‹ æ¡ä»¶ç±»å‹æ€»è§ˆ

#### ğŸ¯ ç›®æ ‡æ¡ä»¶ (Target Conditions)
| æ¡ä»¶ç±»å‹ | ç”¨é€” | ä¸»è¦å‚æ•° |
|---------|------|----------|
| `BLOCK_TARGET` | æ£€æŸ¥ç›®æ ‡æ–¹å—ç±»å‹ | `block`/`blocks` |
| `ENTITY_TARGET` | æ£€æŸ¥ç›®æ ‡å®ä½“ç±»å‹ | `entity_type`, `entity_name` |
| `ACTION` | æ£€æŸ¥ç©å®¶åŠ¨ä½œç±»å‹ | `action` |

#### ğŸŒ ç¯å¢ƒæ¡ä»¶ (Environment Conditions)
| æ¡ä»¶ç±»å‹ | ç”¨é€” | ä¸»è¦å‚æ•° |
|---------|------|----------|
| `LOCATION` | æ£€æŸ¥ä½ç½®ç›¸å…³æ¡ä»¶ | `world`, `min_x`, `max_y`, `radius` |
| `BIOME` | æ£€æŸ¥ç”Ÿç‰©ç¾¤ç³» | `biomes` |
| `TIME` | æ£€æŸ¥æ¸¸æˆæ—¶é—´ | `min_time`, `max_time` |
| `WEATHER` | æ£€æŸ¥å¤©æ°”æ¡ä»¶ | `weather`, `allow_rain` |

#### ğŸ‘¤ ç©å®¶æ¡ä»¶ (Player Conditions)
| æ¡ä»¶ç±»å‹ | ç”¨é€” | ä¸»è¦å‚æ•° |
|---------|------|----------|
| `LEVEL` | æ£€æŸ¥ç©å®¶ç­‰çº§ | `min_level`, `max_level` |
| `PERMISSION` | æ£€æŸ¥æƒé™ | `permissions`, `require_all` |
| `PLAYER_ACTION` | æ£€æŸ¥ç©å®¶åŠ¨ä½œçŠ¶æ€ | `actions`, `logic`, `inverted` |
| `PLAYER_POSE` | æ£€æŸ¥ç©å®¶å§¿æ€ | `pose`, `allow_multiple` |
| `PLAYER_MOVEMENT` | æ£€æŸ¥ç©å®¶ç§»åŠ¨ | `movement_type`, `min_distance` |

#### ğŸ’ ç‰©å“æ¡ä»¶ (Item Conditions)
| æ¡ä»¶ç±»å‹ | ç”¨é€” | ä¸»è¦å‚æ•° |
|---------|------|----------|
| `ITEM` | æ£€æŸ¥èƒŒåŒ…ç‰©å“ | `items`, `consume`, `check_armor` |
| `TOOL` | æ£€æŸ¥å·¥å…·å’Œé™„é­” | `material`, `enchantments`, `require_silk_touch` |

#### ğŸ£ æ´»åŠ¨æ¡ä»¶ (Activity Conditions)
| æ¡ä»¶ç±»å‹ | ç”¨é€” | ä¸»è¦å‚æ•° |
|---------|------|----------|
| `FISHING` | æ£€æŸ¥é’“é±¼ç›¸å…³ | `state`, `catches`, `min_exp` |
| `FARMING` | æ£€æŸ¥å†œä¸šç›¸å…³ | `action`, `crops`, `require_fully_grown` |

#### ğŸ”— ç»„åˆæ¡ä»¶ (Composite Conditions)
| æ¡ä»¶ç±»å‹ | ç”¨é€” | ä¸»è¦å‚æ•° |
|---------|------|----------|
| `COMPOSITE` | ç»„åˆå¤šä¸ªæ¡ä»¶ | `logic`, `conditions` |
| `SEQUENTIAL` | é¡ºåºæ¡ä»¶æ£€æŸ¥ | `steps`, `reset_on_fail` |

#### ğŸ“‹ ä»»åŠ¡æ¡ä»¶ (Quest Conditions)
| æ¡ä»¶ç±»å‹ | ç”¨é€” | ä¸»è¦å‚æ•° |
|---------|------|----------|
| `PRE_QUEST` | å‰ç½®ä»»åŠ¡æ£€æŸ¥ | `quest_id`, `completed` |

### ğŸ¯ æ¡ä»¶è¯­æ³•è¯¦è§£

#### åŸºç¡€æ¡ä»¶è¯­æ³•
```yaml
conditions:
  condition_name:
    type: CONDITION_TYPE
    # æ¡ä»¶ç‰¹å®šå‚æ•°
```

#### ğŸ”§ COMPOSITE æ¡ä»¶ - é€»è¾‘ç»„åˆ
```yaml
conditions:
  complex_condition:
    type: COMPOSITE
    logic: AND  # AND/OR/NOT/XOR
    conditions:
      level_check:
        type: LEVEL
        min_level: 10
      item_check:
        type: ITEM
        items:
          - material: DIAMOND_SWORD
            amount: 1
```

#### ğŸ“Š SEQUENTIAL æ¡ä»¶ - é¡ºåºæ‰§è¡Œ
```yaml
conditions:
  sequence:
    type: SEQUENTIAL
    reset_on_fail: true
    allow_skip: false
    display_name: "&6é¡ºåºæŒ‘æˆ˜"
    fail_message: "&cå¿…é¡»æŒ‰é¡ºåºå®Œæˆï¼"
    
    steps:
      step_1:
        type: COMPOSITE
        logic: AND
        display_name: "æ­¥éª¤1: å‡»æ€åƒµå°¸"
        conditions:
          entity_check:
            type: ENTITY_TARGET
            entity_type: ZOMBIE
          action_check:
            type: ACTION
            action: KILL
      
      step_2:
        type: COMPOSITE
        logic: AND
        display_name: "æ­¥éª¤2: æ”¶é›†æˆ˜åˆ©å“"
        conditions:
          item_check:
            type: ITEM
            items:
              - material: ROTTEN_FLESH
                amount: 5
```

#### ğŸ’ ITEM æ¡ä»¶ - ç‰©å“æ£€æŸ¥
```yaml
conditions:
  item_requirement:
    type: ITEM
    consume: false  # æ˜¯å¦æ¶ˆè€—ç‰©å“
    check_main_hand: true
    check_off_hand: false
    check_armor: false
    items:
      diamond_pickaxe:
        material: DIAMOND_PICKAXE
        amount: 1
        enchantments:
          - "EFFICIENCY:3"
          - "UNBREAKING:2"
```

#### ğŸ”§ TOOL æ¡ä»¶ - å·¥å…·å’Œé™„é­”
```yaml
conditions:
  tool_check:
    type: TOOL
    check_main_hand: true
    material: DIAMOND_PICKAXE  # å¯é€‰ï¼šæŒ‡å®šå·¥å…·ç±»å‹
    require_silk_touch: true   # å¿…é¡»æœ‰ç²¾å‡†é‡‡é›†
    enchantments:
      - "SILK_TOUCH:1"
      - "UNBREAKING:3"
    min_durability: 50         # æœ€å°è€ä¹…åº¦
```

#### ğŸŒ LOCATION æ¡ä»¶ - ä½ç½®æ£€æŸ¥
```yaml
conditions:
  location_check:
    type: LOCATION
    world: world_nether
    min_x: -100
    max_x: 100
    min_y: 10
    max_y: 120
    min_z: -100
    max_z: 100
    radius: 50
```

#### ğŸ£ FISHING æ¡ä»¶ - é’“é±¼æ£€æŸ¥
```yaml
conditions:
  fishing_check:
    type: FISHING
    state: CAUGHT_FISH  # FISHING/CAUGHT_FISH/CAUGHT_ENTITY/FAILED
    catches:
      - SALMON
      - COD
    min_exp: 3
    specific_items:
      - ENCHANTED_BOOK
```

#### ğŸŒ¾ FARMING æ¡ä»¶ - å†œä¸šæ£€æŸ¥
```yaml
conditions:
  farming_check:
    type: FARMING
    action: HARVEST  # PLANT/HARVEST/GROW
    crops:
      - WHEAT
      - CARROTS
    require_fully_grown: true
    require_silk_touch: false
    min_growth_stage: 7
```

#### ğŸ‘¤ PLAYER_ACTION æ¡ä»¶ - ç©å®¶çŠ¶æ€
```yaml
conditions:
  action_check:
    type: PLAYER_ACTION
    logic: OR  # AND/OR/XOR
    inverted: false
    actions:
      - SNEAKING
      - SWIMMING
```

### ğŸ¯ å®é™…åº”ç”¨ç¤ºä¾‹

#### ğŸŒŸ åŸºç¡€ä»»åŠ¡æ¡ä»¶
```yaml
# ç®€å•å‡»æ€ä»»åŠ¡
kill_zombies:
  type: UNIVERSAL
  action: KILL
  amount: 10
  
  conditions:
    zombie_kill:
      type: ENTITY_TARGET
      entity_type: ZOMBIE
```

#### ğŸ¯ ä¸­çº§ä»»åŠ¡æ¡ä»¶
```yaml
# ç‰¹å®šç¯å¢ƒæŒ–çŸ¿ä»»åŠ¡
mine_diamonds:
  type: UNIVERSAL
  action: BREAK
  amount: 5
  
  conditions:
    diamond_mining:
      type: COMPOSITE
      logic: AND
      conditions:
        block_check:
          type: BLOCK_TARGET
          blocks:
            - DIAMOND_ORE
            - DEEPSLATE_DIAMOND_ORE
        location_check:
          type: LOCATION
          max_y: 16
        tool_check:
          type: TOOL
          material: DIAMOND_PICKAXE
          enchantments:
            - "FORTUNE:3"
```

#### ğŸ† é«˜çº§ä»»åŠ¡æ¡ä»¶
```yaml
# å¤æ‚çš„é¡ºåºä»»åŠ¡
master_challenge:
  type: UNIVERSAL
  action: CUSTOM
  amount: 1
  
  conditions:
    sequence:
      type: SEQUENTIAL
      reset_on_fail: true
      fail_message: "&cå¿…é¡»æŒ‰æ­£ç¡®é¡ºåºå®ŒæˆæŒ‘æˆ˜ï¼"
      
      steps:
        step_1_preparation:
          type: COMPOSITE
          logic: AND
          display_name: "&aå‡†å¤‡é˜¶æ®µ"
          conditions:
            level_check:
              type: LEVEL
              min_level: 30
            item_check:
              type: ITEM
              items:
                - material: DIAMOND_SWORD
                  enchantments:
                    - "SHARPNESS:4"
                - material: DIAMOND_CHESTPLATE
                  enchantments:
                    - "PROTECTION:3"
        
        step_2_location:
          type: COMPOSITE
          logic: AND
          display_name: "&eå‰å¾€æŒ‡å®šåŒºåŸŸ"
          conditions:
            location_check:
              type: LOCATION
              world: world_nether
              radius: 100
            biome_check:
              type: BIOME
              biomes:
                - NETHER_WASTES
        
        step_3_combat:
          type: COMPOSITE
          logic: AND
          display_name: "&cæˆ˜æ–—æµ‹è¯•"
          conditions:
            entity_check:
              type: ENTITY_TARGET
              entity_type: WITHER_SKELETON
            action_check:
              type: ACTION
              action: KILL
            time_check:
              type: TIME
              min_time: 18000  # å¤œæ™š
```

### âš ï¸ å¸¸è§è¯­æ³•é”™è¯¯ä¸ä¿®å¤

#### âŒ é”™è¯¯çš„ SEQUENTIAL æ ¼å¼
```yaml
# é”™è¯¯ï¼šä½¿ç”¨æ•°ç»„æ ¼å¼
steps:
  step_1:
    conditions:
      - type: ENTITY_TARGET
        entity_type: ZOMBIE
      - type: ACTION
        action: KILL
```

#### âœ… æ­£ç¡®çš„ SEQUENTIAL æ ¼å¼
```yaml
# æ­£ç¡®ï¼šä½¿ç”¨åµŒå¥—å¯¹è±¡æ ¼å¼
steps:
  step_1:
    type: COMPOSITE
    logic: AND
    conditions:
      entity_check:
        type: ENTITY_TARGET
        entity_type: ZOMBIE
      action_check:
        type: ACTION
        action: KILL
```

#### âŒ é”™è¯¯çš„æ¡ä»¶å‚æ•°
```yaml
# é”™è¯¯ï¼šPLAYER_ACTION ä¸æ”¯æŒç»éªŒæ£€æŸ¥
player_check:
  type: PLAYER_ACTION
  min_exp_level: 30
```

#### âœ… æ­£ç¡®çš„æ¡ä»¶å‚æ•°
```yaml
# æ­£ç¡®ï¼šä½¿ç”¨ LEVEL æ¡ä»¶æ£€æŸ¥ç»éªŒ
player_check:
  type: LEVEL
  min_level: 30
```

### ğŸ”§ æ¡ä»¶è°ƒè¯•æŠ€å·§

#### å¯ç”¨è°ƒè¯•æ¨¡å¼
```yaml
tasks:
  debug_task:
    debug: true  # å¯ç”¨è¯¦ç»†æ—¥å¿—
    conditions:
      # æ¡ä»¶é…ç½®
```

#### ä½¿ç”¨ç®€åŒ–æ¡ä»¶æµ‹è¯•
```yaml
# å…ˆç”¨ç®€å•æ¡ä»¶æµ‹è¯•åŸºæœ¬åŠŸèƒ½
simple_test:
  type: COMPOSITE
  logic: AND
  conditions:
    basic_check:
      type: LEVEL
      min_level: 1
```

#### é€æ­¥å¢åŠ å¤æ‚åº¦
```yaml
# é€æ­¥æ·»åŠ æ›´å¤šæ¡ä»¶
complex_test:
  type: COMPOSITE
  logic: AND
  conditions:
    level_check:
      type: LEVEL
      min_level: 10
    item_check:
      type: ITEM
      items:
        - material: STONE_SWORD
          amount: 1
    # ç»§ç»­æ·»åŠ æ›´å¤šæ¡ä»¶...
```

## ğŸ“¦ ä»»åŠ¡é…ç½®ç¤ºä¾‹

åŸºäºç»Ÿä¸€æ¡ä»¶ç³»ç»Ÿçš„è¯¦ç»†é…ç½®ç¤ºä¾‹ï¼š

### ğŸ† æ–°æ‰‹ä»»åŠ¡ - ä½¿ç”¨ç»Ÿä¸€æ¡ä»¶ç³»ç»Ÿ
```yaml
starter_quest:
  display_name: "&6æ–°æ‰‹ä»»åŠ¡"
  description:
    - "&7æ¬¢è¿æ¥åˆ°æœåŠ¡å™¨ï¼"
    - "&7å®Œæˆè¿™ä¸ªä»»åŠ¡æ¥ç†Ÿæ‚‰åŸºæœ¬æ“ä½œ"
    - ""
    - "&eä»»åŠ¡ç›®æ ‡:"
    - "&7â€¢ å‡»æ€10åªåƒµå°¸"
    - "&7â€¢ æ”¶é›†64ä¸ªåœ†çŸ³"
    - "&7â€¢ ç ´å10ä¸ªåŸæœ¨"
  
  type: MAIN                         # ä»»åŠ¡ç±»å‹
  repeatable: false                  # æ˜¯å¦å¯é‡å¤
  max_completions: 1                 # æœ€å¤§å®Œæˆæ¬¡æ•°
  cooldown: 0                        # å†·å´æ—¶é—´(ç§’)
  time_limit: 0                      # æ—¶é—´é™åˆ¶(ç§’, 0=æ— é™åˆ¶)
  
  # å¼€å§‹æ¡ä»¶ - ä½¿ç”¨ç»Ÿä¸€æ¡ä»¶ç³»ç»Ÿ
  start_conditions:
    level_check:
      type: LEVEL
      min_level: 0
      max_level: 100
  
  # ä»»åŠ¡åˆ—è¡¨ - ä½¿ç”¨ UniversalTask
  tasks:
    kill_zombies:
      type: UNIVERSAL
      action: KILL
      display_name: "&cå‡»æ€åƒµå°¸"
      amount: 10
      
      conditions:
        zombie_target:
          type: ENTITY_TARGET
          entity_type: ZOMBIE
    
    collect_cobblestone:
      type: UNIVERSAL
      action: COLLECT
      display_name: "&7æ”¶é›†åœ†çŸ³"
      amount: 1
      
      conditions:
        cobblestone_item:
          type: ITEM
          items:
            - material: COBBLESTONE
              amount: 64
    
    break_logs:
      type: UNIVERSAL
      action: BREAK
      display_name: "&aç ´ååŸæœ¨"
      amount: 10
      
      conditions:
        log_blocks:
          type: BLOCK_TARGET
          blocks:
            - OAK_LOG
            - BIRCH_LOG
            - SPRUCE_LOG
            - JUNGLE_LOG
            - ACACIA_LOG
            - DARK_OAK_LOG
  
  # å¥–åŠ±ç³»ç»Ÿ
  rewards:
    items:
      type: ITEM
      items:
        sword:
          material: IRON_SWORD
          amount: 1
          name: "&6æ–°æ‰‹ä¹‹å‰‘"
          lore:
            - "&7å®Œæˆæ–°æ‰‹ä»»åŠ¡çš„å¥–åŠ±"
            - "&7ç¥ä½ åœ¨å†’é™©ä¸­å¥½è¿ï¼"
        food:
          material: COOKED_BEEF
          amount: 32
    
    experience:
      type: EXP
      levels: 5
      exp_points: 100
    
    commands:
      type: COMMAND
      executor: CONSOLE
      commands:
        - "give %player% diamond 3"
        - "say &aæ­å–œ %player% å®Œæˆäº†æ–°æ‰‹ä»»åŠ¡ï¼"
```

### ğŸŒ… æ—¥å¸¸ä»»åŠ¡ï¼šç²¾å‡†é‡‡é›†çŸ¿å·¥
```yaml
daily_miner:
  display_name: "&eæ—¥å¸¸ï¼šç²¾å‡†é‡‡é›†çŸ¿å·¥"
  type: DAILY
  repeatable: true
  cooldown: 86400                    # 24å°æ—¶å†·å´
  
  start_conditions:
    permission:
      type: PERMISSION
      permissions:
        - "sagaquests.daily"
      require_all: true
  
  tasks:
    mine_iron_with_silk:
      type: UNIVERSAL
      action: BREAK
      display_name: "&7ç²¾å‡†é‡‡é›†é“çŸ¿"
      amount: 30
      
      conditions:
        iron_mining:
          type: COMPOSITE
          logic: AND
          conditions:
            block_check:
              type: BLOCK_TARGET
              blocks:
                - IRON_ORE
                - DEEPSLATE_IRON_ORE
            tool_check:
              type: TOOL
              check_main_hand: true
              require_silk_touch: true
```

### ğŸ† å¤æ‚çš„é¡ºåºä»»åŠ¡ç¤ºä¾‹
```yaml
sequential_challenge:
  display_name: "&d&lç»´åº¦å¾æœæŒ‘æˆ˜"
  description:
    - "&7æŒ‰é¡ºåºåœ¨ä¸‰ä¸ªç»´åº¦å®Œæˆå²è¯—ä»»åŠ¡"
    - "&cå¿…é¡»æŒ‰æ­£ç¡®é¡ºåºå®Œæˆï¼"
  
  type: SPECIAL
  time_limit: 7200  # 2å°æ—¶é™åˆ¶
  
  start_conditions:
    level_check:
      type: LEVEL
      min_level: 50
    
    pre_quest:
      type: PRE_QUEST
      quest_id: starter_quest
      completed: true
  
  tasks:
    dimension_conquest:
      type: UNIVERSAL
      action: CUSTOM
      display_name: "&d&lç»´åº¦å¾æœ"
      amount: 1
      
      conditions:
        sequence:
          type: SEQUENTIAL
          reset_on_fail: true
          allow_skip: false
          display_name: "&d&lé¡ºåºç»´åº¦æŒ‘æˆ˜"
          fail_message: "&cå¿…é¡»æŒ‰ç…§é¡ºåºå®Œæˆå„ä¸ªç»´åº¦çš„æŒ‘æˆ˜ï¼"
          
          steps:
            step_1_overworld:
              type: COMPOSITE
              logic: AND
              display_name: "&2æ­¥éª¤1: ä¸»ä¸–ç•Œå®ˆæŠ¤è€…"
              conditions:
                entity_check:
                  type: ENTITY_TARGET
                  entity_type: ELDER_GUARDIAN
                location_check:
                  type: LOCATION
                  world: world
                action_check:
                  type: ACTION
                  action: KILL
            
            step_2_nether:
              type: COMPOSITE
              logic: AND
              display_name: "&cæ­¥éª¤2: ä¸‹ç•Œå¾æœ"
              conditions:
                entity_check:
                  type: ENTITY_TARGET
                  entity_type: WITHER_SKELETON
                location_check:
                  type: LOCATION
                  world: world_nether
                action_check:
                  type: ACTION
                  action: KILL
            
            step_3_end:
              type: COMPOSITE
              logic: AND
              display_name: "&5æ­¥éª¤3: æœ«åœ°é¾™æˆ˜"
              conditions:
                entity_check:
                  type: ENTITY_TARGET
                  entity_type: ENDER_DRAGON
                location_check:
                  type: LOCATION
                  world: world_the_end
                action_check:
                  type: ACTION
                  action: KILL
```

## ğŸš€ å®‰è£…ä¸éƒ¨ç½²

### ğŸ“‹ ç³»ç»Ÿè¦æ±‚
- **Java**: 17+ ç‰ˆæœ¬
- **æœåŠ¡ç«¯**: Bukkit 1.20.1+ 

### ğŸ’¾ å•ç«¯æ¨¡å¼éƒ¨ç½²
1. ä¸‹è½½ `SagaQuests.jar` åˆ° `plugins/` ç›®å½•
2. é‡å¯æœåŠ¡å™¨ï¼Œæ’ä»¶å°†è‡ªåŠ¨åˆå§‹åŒ–
3. ç¼–è¾‘ `config.yml` ï¼ˆå¯é€‰ï¼‰
4. åœ¨ `quests/` ç›®å½•ä¸­æ·»åŠ ä»»åŠ¡é…ç½®
5. æ‰§è¡Œ `/quest reload` é‡æ–°åŠ è½½

### ğŸŒ ç¾¤ç»„æ¨¡å¼éƒ¨ç½²
1. **å‡†å¤‡ç¯å¢ƒ**
   - æ­å»º Redis æœåŠ¡å™¨
   - æ­å»º MySQL æ•°æ®åº“
   - åˆ›å»º `sagaquests` æ•°æ®åº“

2. **é…ç½®æ’ä»¶**
   ```yaml
   storage:
     type: redis
     redis:
       host: "redis.example.com"
       port: 6379
       password: "your_redis_password"
     mysql:
       host: "mysql.example.com"
       database: "sagaquests"
       username: "sagaquests_user"
       password: "your_mysql_password"
   ```
